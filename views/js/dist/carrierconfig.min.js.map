{"version":3,"sources":["webpack://MollieModule.[name]/./src/back/carrierconfig/components/CarrierConfig.tsx","webpack://MollieModule.[name]/./src/back/carrierconfig/components/CarrierConfigError.tsx","webpack://MollieModule.[name]/./src/back/carrierconfig/index.tsx","webpack://MollieModule.[name]/./src/back/carrierconfig/store/actions.ts","webpack://MollieModule.[name]/./src/back/carrierconfig/store/carriers.ts","webpack://MollieModule.[name]/./src/back/carrierconfig/store/index.ts","webpack://MollieModule.[name]/./src/shared/axios.ts"],"names":["ConfigCarrierError","lazy","CarrierConfig","props","useState","undefined","carriers","setCarriers","message","setMessage","_init","ajaxEndpoint","config","axios","get","data","console","error","Error","_carrierConfig","carrierConfig","forEach","carrier","id_carrier","_updateCarrierConfig","id","key","value","newCarriers","cloneDeep","find","item","useEffect","then","translations","target","legacy","Array","isArray","isEmpty","cx","hereYouCanConfigureCarriers","youCanUseTheFollowingVariables","shippingNumber","invoiceCountryCode","invoicePostcode","deliveryCountryCode","deliveryPostcode","languageCode","name","urlSource","customUrl","map","source","doNotAutoShip","noTrackingInformation","carrierUrl","module","custom_url","JSON","stringify","Code","styled","code","retry","useCallback","useMappedState","state","unableToLoadCarriers","e","preventDefault","faRedoAlt","Promise","all","store","default","updateConfig","updateTranslations","dispatch","render","document","getElementById","ReduxActionTypes","type","action","checkoutApp","combineReducers","devTools","window","__REDUX_DEVTOOLS_EXTENSION__","createStore","carriersApp","create","transformResponse","res","parse","replace","headers"],"mappings":"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","file":"carrierconfig.min.js","sourcesContent":["/**\n * Mollie       https://www.mollie.nl\n *\n * @author      Mollie B.V. <info@mollie.nl>\n * @copyright   Mollie B.V.\n * @link        https://github.com/mollie/PrestaShop\n * @license     https://github.com/mollie/PrestaShop/blob/master/LICENSE.md\n * @codingStandardsIgnoreStart\n */\nimport React, { ReactElement, Suspense, useEffect, useState, lazy } from 'react';\nimport cx from 'classnames';\nimport { cloneDeep, find, forEach, isEmpty } from 'lodash';\n\nimport axios from '@shared/axios';\nimport LoadingDots from '@shared/components/LoadingDots';\nimport {\n  IMollieCarrierConfig,\n  IMollieCarrierConfigItem,\n  IMollieCarrierConfigItems,\n  ITranslations,\n} from '@shared/globals';\n\nconst ConfigCarrierError = lazy(() => import(/* webpackChunkName: \"carrierconfig\" */ '@carrierconfig/components/CarrierConfigError'));\n\ninterface IProps {\n  config: IMollieCarrierConfig;\n  translations: ITranslations;\n  target: string;\n}\n\nexport default function CarrierConfig(props: IProps): ReactElement<{}> {\n  const [carriers, setCarriers] = useState<Array<IMollieCarrierConfigItem>>(undefined);\n  const [message, setMessage] = useState<string>(undefined);\n\n  async function _init(): Promise<void> {\n    const { config: { ajaxEndpoint } } = props;\n    try {\n      const { data: { carriers } = { carriers: null } } = await axios.get(ajaxEndpoint);\n      setCarriers(carriers);\n    } catch (e) {\n      console.error(e);\n      setCarriers(null);\n      setMessage((e && e instanceof Error) ? e.message : 'Check the browser console for errors');\n    }\n  }\n\n  function _carrierConfig(): IMollieCarrierConfigItems {\n    const carrierConfig: IMollieCarrierConfigItems = {};\n    forEach(carriers, (carrier: IMollieCarrierConfigItem) => {\n      carrierConfig[carrier.id_carrier] = carrier;\n    });\n\n    return carrierConfig;\n  }\n\n  function _updateCarrierConfig(id: string, key: string, value: string|null): void {\n    const newCarriers = cloneDeep(carriers);\n    const config = find(newCarriers, (item: IMollieCarrierConfigItem) => item.id_carrier === id);\n    if (typeof config === 'undefined') {\n      return;\n    }\n    config[key] = value;\n\n    setCarriers(newCarriers);\n  }\n\n  useEffect(() => {\n    _init().then();\n  }, []);\n\n  const { translations, target, config: { legacy } } = props;\n\n  if (typeof carriers === 'undefined') {\n    return <LoadingDots/>;\n  }\n\n  if (!Array.isArray(carriers) || (Array.isArray(carriers) && isEmpty(carriers))) {\n    return (\n      <Suspense fallback={null}>\n        <ConfigCarrierError message={message} retry={_init}/>\n      </Suspense>\n    );\n  }\n\n  return (\n    <>\n      <div className={cx({\n        'alert': !legacy,\n        'alert-info': !legacy,\n        'warn': legacy,\n      })}\n      >\n        {translations.hereYouCanConfigureCarriers}\n        <br/>{translations.youCanUseTheFollowingVariables}\n        <ul>\n          <li><strong>@ </strong>: {translations.shippingNumber}</li>\n          <li><strong>%%shipping_number%% </strong>: {translations.shippingNumber}</li>\n          <li><strong>%%invoice.country_iso%%</strong>: {translations.invoiceCountryCode}</li>\n          <li><strong>%%invoice.postcode%% </strong>: {translations.invoicePostcode}</li>\n          <li><strong>%%delivery.country_iso%%</strong>: {translations.deliveryCountryCode}</li>\n          <li><strong>%%delivery.postcode%% </strong>: {translations.deliveryPostcode}</li>\n          <li><strong>%%lang_iso%% </strong>: {translations.languageCode}</li>\n        </ul>\n      </div>\n      <table className=\"list form alternate table\">\n        <thead>\n          <tr>\n            <td className=\"left\">{translations.name}</td>\n            <td className=\"left\">{translations.urlSource}</td>\n            <td className=\"left\">{translations.customUrl}</td>\n          </tr>\n        </thead>\n        <tbody>\n          {carriers.map((carrier) => (\n            <tr key={carrier.id_carrier}>\n              <td className=\"left\">\n                {carrier.name}\n              </td>\n              <td className=\"left\">\n                <select\n                  value={carrier.source}\n                  onChange={({ target: { value } }) => _updateCarrierConfig(carrier.id_carrier, 'source', value)}\n                >\n                  <option value=\"do_not_auto_ship\">{translations.doNotAutoShip}</option>\n                  <option value=\"no_tracking_info\">{translations.noTrackingInformation}</option>\n                  <option value=\"carrier_url\">{translations.carrierUrl}</option>\n                  <option value=\"custom_url\">{translations.customUrl}</option>\n                  {carrier.module && <option value=\"module\">{translations.module}</option>}\n                </select>\n              </td>\n              <td className=\"left\">\n                <input\n                  type=\"text\"\n                  disabled={carrier.source !== 'custom_url'}\n                  value={carrier.custom_url}\n                  onChange={({ target: { value } }) => _updateCarrierConfig(carrier.id_carrier, 'custom_url', value)}\n                />\n              </td>\n            </tr>\n          ))}\n        </tbody>\n      </table>\n      <input type=\"hidden\" id={target} name={target} value={JSON.stringify(_carrierConfig())}/>\n    </>\n  );\n}\n","/**\n * Mollie       https://www.mollie.nl\n *\n * @author      Mollie B.V. <info@mollie.nl>\n * @copyright   Mollie B.V.\n * @link        https://github.com/mollie/PrestaShop\n * @license     https://github.com/mollie/PrestaShop/blob/master/LICENSE.md\n * @codingStandardsIgnoreStart\n */\nimport React, { ReactElement, useCallback } from 'react';\nimport cx from 'classnames';\nimport { faRedoAlt } from '@fortawesome/free-solid-svg-icons';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport styled from 'styled-components';\n\nimport { IMollieCarrierConfig, ITranslations } from '@shared/globals';\nimport { useMappedState } from 'redux-react-hook';\n\ninterface IProps {\n  retry: Function;\n  message?: string;\n}\n\nconst Code = styled.code`\n  font-size: 14px!important;\n` as any;\n\nexport default function ConfigCarrierError({ retry, message }: IProps): ReactElement<{}> {\n  const { translations, config: { legacy } }: Partial<IMollieOrderState> = useCallback(useMappedState((state: IMollieCarriersState): any => ({\n    translations: state.translations,\n    config: state.config,\n  })), []);\n\n  return (\n    <div\n      className={cx({\n        'alert': !legacy,\n        'alert-danger': !legacy,\n        'error': legacy,\n      })}\n    >\n      {translations.unableToLoadCarriers}&nbsp;\n      {message && <><br/><br/>{translations.error}: <Code>{message}</Code><br/><br/></>}\n      <button\n        className={cx({\n          'btn': !legacy,\n          'btn-danger': !legacy,\n          'button': legacy,\n        })}\n        onClick={(e) => {\n          e.preventDefault();\n          retry();\n        }}\n      >\n        {!legacy && <FontAwesomeIcon icon={faRedoAlt}/>}&nbsp;{translations.retry}?\n      </button>\n    </div>\n  );\n}\n","/**\n * Mollie       https://www.mollie.nl\n *\n * @author      Mollie B.V. <info@mollie.nl>\n * @copyright   Mollie B.V.\n * @link        https://github.com/mollie/PrestaShop\n * @license     https://github.com/mollie/PrestaShop/blob/master/LICENSE.md\n * @codingStandardsIgnoreStart\n */\nimport React from 'react';\nimport { StoreContext } from 'redux-react-hook';\nimport { render } from 'react-dom';\n\nimport { IMollieCarrierConfig, ITranslations } from '@shared/globals';\n\nexport default (\n  target: string,\n  config: IMollieCarrierConfig,\n  translations: ITranslations\n) => {\n  (async function() {\n    const [\n      { default: store },\n      { updateConfig, updateTranslations },\n      { default: CarrierConfig },\n    ] = await Promise.all([\n      import(/* webpackChunkName: \"carrierconfig\" */ '@carrierconfig/store'),\n      import(/* webpackChunkName: \"carrierconfig\" */ '@carrierconfig/store/actions'),\n      import(/* webpackChunkName: \"carrierconfig\" */ '@carrierconfig/components/CarrierConfig'),\n    ]);\n\n    store.dispatch(updateConfig(config));\n    store.dispatch(updateTranslations(translations));\n\n    return render(\n      (\n        <StoreContext.Provider value={store}>\n          <CarrierConfig translations={translations} config={config} target={target}/>\n        </StoreContext.Provider>\n      ),\n      document.getElementById(`${target}_container`)\n    );\n  }());\n};\n","/**\n * Mollie       https://www.mollie.nl\n *\n * @author      Mollie B.V. <info@mollie.nl>\n * @copyright   Mollie B.V.\n * @link        https://github.com/mollie/PrestaShop\n * @license     https://github.com/mollie/PrestaShop/blob/master/LICENSE.md\n * @codingStandardsIgnoreStart\n */\n// Action types\nimport { IMollieCarrierConfig, ITranslations } from '@shared/globals';\n\nexport enum ReduxActionTypes {\n  updateTranslations = 'UPDATE_MOLLIE_CARRIER_TRANSLATIONS',\n  updateConfig = 'UPDATE_MOLLIE_CARRIER_CONFIG',\n}\n\n// Action creators\nexport interface IUpdateTranslationsAction {\n  type: string;\n  translations: ITranslations;\n}\n\nexport interface IUpdateCarrierConfigAction {\n  type: string;\n  config: IMollieCarrierConfig;\n}\n\nexport function updateTranslations(translations: ITranslations): IUpdateTranslationsAction {\n  return { type: ReduxActionTypes.updateTranslations, translations };\n}\n\nexport function updateConfig(config: IMollieCarrierConfig): IUpdateCarrierConfigAction {\n  return { type: ReduxActionTypes.updateConfig, config };\n}\n","/**\n * Mollie       https://www.mollie.nl\n *\n * @author      Mollie B.V. <info@mollie.nl>\n * @copyright   Mollie B.V.\n * @link        https://github.com/mollie/PrestaShop\n * @license     https://github.com/mollie/PrestaShop/blob/master/LICENSE.md\n * @codingStandardsIgnoreStart\n */\nimport { combineReducers } from 'redux';\n\nimport { IUpdateCarrierConfigAction, IUpdateTranslationsAction, ReduxActionTypes } from '@carrierconfig/store/actions';\nimport { IMollieCarrierConfig, IMollieCarrierConfigItem, ITranslations } from '@shared/globals';\n\ndeclare global {\n  interface IMollieCarriersState {\n    translations: ITranslations;\n    config: IMollieCarrierConfig;\n    carriers: Array<IMollieCarrierConfigItem>;\n  }\n}\n\nconst translations = (state: any = {}, action: IUpdateTranslationsAction): ITranslations => {\n  switch (action.type) {\n    case ReduxActionTypes.updateTranslations:\n      return action.translations;\n    default:\n      return state;\n  }\n};\n\nconst config = (state: any = {}, action: IUpdateCarrierConfigAction): IMollieCarrierConfig => {\n  switch (action.type) {\n    case ReduxActionTypes.updateConfig:\n      return action.config;\n    default:\n      return state;\n  }\n};\n\nconst checkoutApp = combineReducers({\n  translations,\n  config,\n});\n\nexport default checkoutApp;\n","/**\n * Mollie       https://www.mollie.nl\n *\n * @author      Mollie B.V. <info@mollie.nl>\n * @copyright   Mollie B.V.\n * @link        https://github.com/mollie/PrestaShop\n * @license     https://github.com/mollie/PrestaShop/blob/master/LICENSE.md\n * @codingStandardsIgnoreStart\n */\nimport { createStore, Store } from 'redux';\n\nimport carriersApp from '@carrierconfig/store/carriers';\n\ndeclare let window: any;\n\nlet store: Store;\nconst devTools = window.__REDUX_DEVTOOLS_EXTENSION__;\n\nstore = createStore(\n  carriersApp,\n  devTools && devTools(),\n);\n\nexport default store;\n","/**\n * Mollie       https://www.mollie.nl\n *\n * @author      Mollie B.V. <info@mollie.nl>\n * @copyright   Mollie B.V.\n * @link        https://github.com/mollie/PrestaShop\n * @license     https://github.com/mollie/PrestaShop/blob/master/LICENSE.md\n * @codingStandardsIgnoreStart\n */\nimport axios from 'axios';\n\nexport default axios.create({\n  transformResponse: [res => JSON.parse(res.replace(/^[^{[]*/mg, '').replace(/([^}\\]]*)$/mg, ''))],\n  headers: {\n    'X-Requested-With': 'XMLHttpRequest',\n    'Content-Type': 'application/json',\n    'Accept': 'application/json',\n  },\n});\n\n"],"sourceRoot":""}