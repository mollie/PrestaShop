{"version":3,"sources":["webpack://MollieModule.[name]/./src/back/transaction/misc/ajax.ts","webpack://MollieModule.[name]/./src/shared/axios.ts"],"names":["retrievePayment","transactionId","Promise","all","store","default","ajaxEndpoint","getState","config","axios","post","resource","action","data","payment","console","error","retrieveOrder","order","refundPayment","amount","success","message","detailed","defaults","refundOrder","orderLines","cancelOrder","shipOrder","tracking","create","transformResponse","res","JSON","parse","replace","headers"],"mappings":"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","file":"transaction~transactionRefund.min.js","sourcesContent":["/**\n * Copyright (c) 2012-2020, Mollie B.V.\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * - Redistributions of source code must retain the above copyright notice,\n *    this list of conditions and the following disclaimer.\n * - Redistributions in binary form must reproduce the above copyright\n *    notice, this list of conditions and the following disclaimer in the\n *    documentation and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE AUTHOR AND CONTRIBUTORS ``AS IS'' AND ANY\n * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE AUTHOR OR CONTRIBUTORS BE LIABLE FOR ANY\n * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER\n * CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT\n * LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY\n * OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH\n * DAMAGE.\n *\n * @author     Mollie B.V. <info@mollie.nl>\n * @copyright  Mollie B.V.\n * @license    Berkeley Software Distribution License (BSD-License 2) http://www.opensource.org/licenses/bsd-license.php\n * @category   Mollie\n * @package    Mollie\n * @link       https://www.mollie.nl\n */\nimport axios from '@shared/axios';\nimport { defaults } from 'lodash';\n\nimport { IMollieApiOrder, IMollieApiPayment, IMollieOrderLine, IMollieTracking } from '@shared/globals';\n\nexport const retrievePayment = async (transactionId: string): Promise<IMollieApiPayment|null> => {\n  const [\n    { default: store },\n  ] = await Promise.all([\n    import(/* webpackPrefetch: true, webpackChunkName: \"transaction\" */ '@transaction/store'),\n  ]);\n  try {\n    const ajaxEndpoint = store.getState().config.ajaxEndpoint;\n\n    const { data: { payment } = { payment: null } } = await axios.post(ajaxEndpoint, {\n      resource: 'payments',\n      action: 'retrieve',\n      transactionId,\n    });\n\n    return payment || null;\n  } catch (e) {\n    console.error(e);\n\n    return null;\n  }\n};\n\nexport const retrieveOrder = async (transactionId: string): Promise<IMollieApiOrder|null> => {\n  const [\n    { default: store }\n  ] = await Promise.all([\n    import(/* webpackPrefetch: true, webpackChunkName: \"transaction\" */ '@transaction/store'),\n  ]);\n  try {\n    const ajaxEndpoint = store.getState().config.ajaxEndpoint;\n\n    const { data: { order } = { order: null } } = await axios.post(ajaxEndpoint, {\n      resource: 'orders',\n      action: 'retrieve',\n      transactionId,\n    });\n\n    return order || null;\n  } catch (e) {\n    console.error(e);\n\n    return null;\n  }\n};\n\nexport const refundPayment = async (transactionId: string, amount?: number): Promise<any> => {\n  const [\n    { default: store },\n  ] = await Promise.all([\n      import(/* webpackPrefetch: true, webpackChunkName: \"transaction\" */ '@transaction/store'),\n  ]);\n  try {\n    const ajaxEndpoint = store.getState().config.ajaxEndpoint;\n\n    const { data } = await axios.post(ajaxEndpoint, {\n      resource: 'payments',\n      action: 'refund',\n      transactionId,\n      amount,\n    });\n    if (!data.success && typeof data.message === 'string') {\n      throw data.detailed ? data.detailed : data.message;\n    }\n\n    return defaults(data, { success: false, payment: null });\n  } catch (e) {\n    if (typeof e === 'string') {\n      throw e;\n    }\n    console.error(e);\n\n    return false;\n  }\n};\n\nexport const refundOrder = async (order: IMollieApiOrder, orderLines?: Array<IMollieOrderLine>): Promise<any> => {\n  const [\n    { default: store},\n  ] = await Promise.all([\n    import(/* webpackPrefetch: true, webpackChunkName: \"transaction\" */ '@transaction/store'),\n  ]);\n  try {\n    const ajaxEndpoint = store.getState().config.ajaxEndpoint;\n\n    const { data } = await axios.post(ajaxEndpoint, {\n      resource: 'orders',\n      action: 'refund',\n      orderLines,\n      order\n    });\n    if (!data.success && typeof data.message === 'string') {\n      throw data.detailed ? data.detailed : data.message;\n    }\n    return defaults(data, { success: false, order: null });\n  } catch (e) {\n    if (typeof e === 'string') {\n      throw e;\n    }\n    console.error(e);\n\n    return false;\n  }\n};\n\nexport const cancelOrder = async (transactionId: string, orderLines?: Array<IMollieOrderLine>): Promise<any> => {\n  const [\n    { default: store },\n  ] = await Promise.all([\n    import(/* webpackPrefetch: true, webpackChunkName: \"transaction\" */ '@transaction/store'),\n  ]);\n  try {\n    const ajaxEndpoint = store.getState().config.ajaxEndpoint;\n\n    const { data } = await axios.post(ajaxEndpoint, {\n      resource: 'orders',\n      action: 'cancel',\n      transactionId,\n      orderLines,\n    });\n    if (!data.success && typeof data.message === 'string') {\n      throw data.detailed ? data.detailed : data.message;\n    }\n    return defaults(data, { success: false, order: null });\n  } catch (e) {\n    if (typeof e === 'string') {\n      throw e;\n    }\n    console.error(e);\n\n    return false;\n  }\n};\n\nexport const shipOrder = async (transactionId: string, orderLines?: Array<IMollieOrderLine>, tracking?: IMollieTracking): Promise<any> => {\n  const [\n    { default: store },\n  ] = await Promise.all([\n    import(/* webpackPrefetch: true, webpackChunkName: \"transaction\" */ '@transaction/store'),\n  ]);\n  try {\n    const ajaxEndpoint = store.getState().config.ajaxEndpoint;\n\n    const { data } = await axios.post(ajaxEndpoint, {\n      resource: 'orders',\n      action: 'ship',\n      transactionId,\n      orderLines,\n      tracking,\n    });\n    if (!data.success && typeof data.message === 'string') {\n      throw data.detailed ? data.detailed : data.message;\n    }\n\n    return defaults(data, { success: false, order: null });\n  } catch (e) {\n    if (typeof e === 'string') {\n      throw e;\n    }\n    console.error(e);\n\n    return false;\n  }\n};\n","/**\n * Copyright (c) 2012-2020, Mollie B.V.\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * - Redistributions of source code must retain the above copyright notice,\n *    this list of conditions and the following disclaimer.\n * - Redistributions in binary form must reproduce the above copyright\n *    notice, this list of conditions and the following disclaimer in the\n *    documentation and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE AUTHOR AND CONTRIBUTORS ``AS IS'' AND ANY\n * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE AUTHOR OR CONTRIBUTORS BE LIABLE FOR ANY\n * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER\n * CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT\n * LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY\n * OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH\n * DAMAGE.\n *\n * @author     Mollie B.V. <info@mollie.nl>\n * @copyright  Mollie B.V.\n * @license    Berkeley Software Distribution License (BSD-License 2) http://www.opensource.org/licenses/bsd-license.php\n * @category   Mollie\n * @package    Mollie\n * @link       https://www.mollie.nl\n */\nimport axios from 'axios';\n\nexport default axios.create({\n  transformResponse: [res => JSON.parse(res.replace(/^[^{[]*/mg, '').replace(/([^}\\]]*)$/mg, ''))],\n  headers: {\n    'X-Requested-With': 'XMLHttpRequest',\n    'Content-Type': 'application/json',\n    'Accept': 'application/json',\n  },\n});\n\n"],"sourceRoot":""}